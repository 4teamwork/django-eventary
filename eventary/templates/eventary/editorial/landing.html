{% extends 'eventary/base.html' %}

{% load bootstrap_tags %}
{% load eventary_tags %}
{% load i18n %}

{% block 'extra_head' %}
{{ form.media }}
{% endblock %}

{% block 'content' %}

{% comment %}Translators: Landing page for editorial users{% endcomment %}
{% comment %}Translators: Title (first header){% endcomment %}
{% trans 'Eventary - an inventary for events' as h_title %}
{% comment %}Translators: Headers{% endcomment %}
{% trans 'calendars' as h_calendars %}
{% trans 'filter events' as h_event_filter %}
{% trans 'upcoming events' as h_upcoming_events %}
{% trans 'upcoming proposals' as h_upcoming_proposals %}
{% comment %}Translators: Table headers{% endcomment %}
{% trans 'title' as th_title %}
{% trans 'actions' as th_actions %}
{% trans '# events' as th_nr_events %}
{% trans '# proposals' as th_nr_proposals %}
{% comment %}Translators: Search button title{% endcomment %}
{% trans 'search events matching the filter parameters' as btn_search_title %}
{% trans 'search' as btn_search_text %}

<h1>{{ h_title|capfirst }}</h1>

{% if calendar_list.count > 1 %}
<h2>{{ h_calendars|capfirst }}</h2>
{% include 'eventary/lists/calendars.html' with request=request page=calendar_page prefix='calendar_page' %}
{% endif %}

{% page_navigation calendar_page request 'calendar_page'  %}

<h2>{{ h_event_filter|capfirst }}</h2>
<form class="form-inline filterform" method="get">
    <div class="container">
        <div class="row">
            <div class="col-md-10">
                <div class="input-group">
                    {{ form|as_bootstrap }}
                </div>
            </div>
            <div class="col-md-2">
                <button type="submit"
                        class="btn btn-primary glyphicon glyphicon-search"
                        title="{{ btn_search_title|capfirst }}">
                    {{ btn_search_text|capfirst }}
                </button>
            </div>
        </div>
    </div>
</form>

<h2>{{ h_upcoming_events|capfirst }}</h2>

{% if calendar_list.count == 1 %}
    {% include 'eventary/lists/events.html' with request=request calendar=calendar_list.first page=event_page prefix='event_page' %}
{% else %}
    {% include 'eventary/lists/events.html' with request=request page=event_page prefix='event_page' %}
{% endif %}

<h2>{{ h_upcoming_proposals|capfirst }}</h2>
{% if calendar_list.count == 1 %}
    {% include 'eventary/lists/events.html' with request=request calendar=calendar_list.first page=proposal_page prefix='proposal_page' %}
{% else %}
    {% include 'eventary/lists/events.html' with request=request page=proposal_page prefix='proposal_page' %}
{% endif %}

{% endblock %}
